openapi: 3.0.3
info:
  title: Blog API
  version: 1.0.0
  description: 블로그 사용자/관리자/공통 API v1

servers:
  - url: https://{SERVER_URL}
    variables:
      SERVER_URL:
        default: example.com

tags:
  - name: Public
    description: 사용자 API
  - name: Admin
    description: 관리자 API
  - name: Common
    description: 공통 API

# ────────────────────────────────────────────
# Security
# ────────────────────────────────────────────
components:
  securitySchemes:
    cookieAuth:
      type: apiKey
      in: cookie
      name: access_token

  # ────────────────────────────────────────────
  # Reusable Schemas
  # ────────────────────────────────────────────
  schemas:

    # ── 공통 응답 래퍼 ──────────────────────────
    CommonResponse:
      type: object
      required: [status, code, detail, message, timestamp, path]
      properties:
        status:
          type: integer
          example: 200
        code:
          type: string
          example: "E200_001"
        detail:
          type: string
          example: "Successfully retrieved."
        message:
          type: string
          example: "정상적으로 처리되었습니다."
        timestamp:
          type: string
          format: date-time
          example: "2026-01-20T16:31:00+09:00"
        path:
          type: string
          example: "/api/v1/posts"

    # ── 에러 응답 ──────────────────────────────
    ErrorResponse:
      allOf:
        - $ref: '#/components/schemas/CommonResponse'

    # ── 페이지네이션 ────────────────────────────
    Pagination:
      type: object
      required: [page, pageSize, total, totalPages, hasNextPage, hasPrevPage]
      properties:
        page:
          type: integer
          example: 1
        pageSize:
          type: integer
          example: 8
        total:
          type: integer
          example: 3
        totalPages:
          type: integer
          example: 1
        hasNextPage:
          type: boolean
        hasPrevPage:
          type: boolean

    # ── 정렬 ────────────────────────────────────
    Sort:
      type: object
      required: [by, dir]
      properties:
        by:
          type: string
          example: "createdAt"
        dir:
          type: string
          enum: [asc, desc]
          example: "desc"

    # ── 태그 (Public) ────────────────────────────
    TagPublic:
      type: object
      required: [id, name, slug]
      properties:
        id:
          type: integer
          example: 3
        name:
          type: string
          example: "태그1"
        slug:
          type: string
          example: "tag-1"

    # ── 카테고리 (Public: posts/post) ────────────
    CategoryPublic:
      type: object
      required: [id, name, slug, breadcrumb]
      nullable: true
      properties:
        id:
          type: integer
          example: 2
        name:
          type: string
          example: "개발"
        slug:
          type: string
          example: "development"
        breadcrumb:
          type: string
          example: "개발"

    # ── 카테고리 (Admin: includes parentId, path) ─
    CategoryAdmin:
      type: object
      required: [id, name, slug, breadcrumb, path]
      nullable: true
      properties:
        id:
          type: integer
          example: 3
        parentId:
          type: integer
          nullable: true
          example: 4
        name:
          type: string
          example: "일상"
        slug:
          type: string
          example: "daily"
        path:
          type: string
          example: "0004/0003"
        breadcrumb:
          type: string
          example: "개인 > 일상"

    # ── 게시물 요약 (Public 목록) ─────────────────
    PostSummaryPublic:
      type: object
      required: [id, slug, title, excerpt, thumbnail, createdAt, category, tags]
      properties:
        id:
          type: integer
          example: 1
        slug:
          type: string
          example: "example-my-blog-1"
        title:
          type: string
          example: "제목1"
        excerpt:
          type: string
          example: "내용 요약 1"
        thumbnail:
          type: string
          nullable: true
          example: "https://img.example.com/test.png"
        createdAt:
          type: string
          format: date-time
        category:
          nullable: true
          allOf:
            - $ref: '#/components/schemas/CategoryPublic'
        tags:
          type: array
          items:
            $ref: '#/components/schemas/TagPublic'

    # ── 게시물 상세 (Public 단건) ─────────────────
    PostDetailPublic:
      type: object
      required: [id, slug, title, content, thumbnail, createdAt, updatedAt, category, tags]
      properties:
        id:
          type: integer
        slug:
          type: string
        title:
          type: string
        content:
          type: string
        thumbnail:
          type: string
          nullable: true
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        category:
          nullable: true
          allOf:
            - $ref: '#/components/schemas/CategoryPublic'
        tags:
          type: array
          items:
            $ref: '#/components/schemas/TagPublic'

    # ── 게시물 요약 (Admin 목록) ──────────────────
    PostSummaryAdmin:
      allOf:
        - $ref: '#/components/schemas/PostSummaryPublic'
        - type: object
          required: [updatedAt, isPublish, isPrivate]
          properties:
            updatedAt:
              type: string
              format: date-time
            category:
              nullable: true
              allOf:
                - $ref: '#/components/schemas/CategoryAdmin'
            isPublish:
              type: boolean
            isPrivate:
              type: boolean

    # ── 게시물 상세 (Admin/Create/Patch) ──────────
    PostDetailAdmin:
      type: object
      required: [id, slug, title, content, thumbnail, createdAt, updatedAt, isPublish, isPrivate, category, tags]
      properties:
        id:
          type: integer
        slug:
          type: string
        title:
          type: string
        content:
          type: string
        thumbnail:
          type: string
          nullable: true
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        isPublish:
          type: boolean
        isPrivate:
          type: boolean
        category:
          nullable: true
          allOf:
            - $ref: '#/components/schemas/CategoryAdmin'
        tags:
          type: array
          items:
            $ref: '#/components/schemas/TagPublic'

    # ── 태그 상세 (Admin Create/Patch 결과) ────────
    TagDetail:
      type: object
      required: [id, name, slug, createdAt, updatedAt]
      properties:
        id:
          type: integer
          example: 12
        name:
          type: string
          example: "태그 12"
        slug:
          type: string
          example: "tag-12"
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    # ── 카테고리 상세 (Admin Create/Patch 결과) ─────
    CategoryDetail:
      type: object
      required: [id, parentId, name, slug, path, breadcrumb, createdAt, updatedAt]
      properties:
        id:
          type: integer
          example: 5
        parentId:
          type: integer
          nullable: true
          example: 2
        name:
          type: string
          example: "C++"
        slug:
          type: string
          example: "cpp"
        path:
          type: string
          example: "0001/0002/0005"
        breadcrumb:
          type: string
          example: "개발 > 응용 프로그램 > C++"
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    # ── Diff (changedFields) ─────────────────────
    Diff:
      type: object
      required: [changedFields]
      properties:
        changedFields:
          type: array
          items:
            type: string
          example: ["name", "slug"]

# ────────────────────────────────────────────
# Paths
# ────────────────────────────────────────────
paths:

  # ============================================================
  # 공통
  # ============================================================
  /api/v1/health:
    get:
      tags: [Common]
      summary: 헬스체크
      description: 서버 상태를 확인합니다. 'OK'를 반환합니다.
      operationId: healthCheck
      responses:
        '200':
          description: OK
          content:
            text/plain:
              schema:
                type: string
                example: "OK"

  # ============================================================
  # 사용자 API
  # ============================================================
  /api/v1/posts:
    get:
      tags: [Public]
      summary: 게시물 목록 조회
      description: 게시물 목록을 조회합니다.
      operationId: getPosts
      parameters:
        - name: page
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 10000
            default: 1
        - name: pageSize
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 200
            default: 8
        - name: search
          in: query
          schema:
            type: string
            maxLength: 100
        - name: categorySlug
          in: query
          schema:
            type: string
            maxLength: 100
        - name: tagSlugs
          in: query
          schema:
            type: array
            items:
              type: string
            maxItems: 50
          style: form
          explode: false
        - name: tagFilterMode
          in: query
          schema:
            type: string
            enum: [OR, AND]
            default: OR
        - name: sortBy
          in: query
          schema:
            type: string
            enum: [createdAt, title, excerpt]
            default: createdAt
        - name: sortDir
          in: query
          schema:
            type: string
            enum: [asc, desc]
            default: desc
      responses:
        '200':
          description: 게시물 목록 조회 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      result:
                        type: object
                        properties:
                          meta:
                            type: object
                            properties:
                              pagination:
                                $ref: '#/components/schemas/Pagination'
                              sort:
                                $ref: '#/components/schemas/Sort'
                              filters:
                                type: object
                                properties:
                                  search:
                                    type: string
                                    nullable: true
                                  categorySlug:
                                    type: string
                                    nullable: true
                                  tagSlugs:
                                    type: array
                                    items:
                                      type: string
                          data:
                            type: array
                            items:
                              $ref: '#/components/schemas/PostSummaryPublic'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    post:
      tags: [Admin]
      summary: 게시물 생성
      description: 게시물을 생성합니다. JWT 인증이 필요합니다.
      operationId: createPost
      security:
        - cookieAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [slug, title, content]
              properties:
                slug:
                  type: string
                  maxLength: 150
                title:
                  type: string
                  maxLength: 100
                content:
                  type: string
                  maxLength: 100000
                thumbnail:
                  type: string
                  nullable: true
                  maxLength: 2048
                categoryId:
                  type: integer
                  nullable: true
                tagIds:
                  type: array
                  items:
                    type: integer
                  maxItems: 50
                isPublish:
                  type: boolean
                  default: true
                isPrivate:
                  type: boolean
                  default: false
      responses:
        '201':
          description: 게시물 생성 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      result:
                        $ref: '#/components/schemas/PostDetailAdmin'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/posts/{slug}:
    get:
      tags: [Public]
      summary: 개별 게시물 조회
      description: 개별 게시물 내용을 가져옵니다.
      operationId: getPostBySlug
      parameters:
        - name: slug
          in: path
          required: true
          schema:
            type: string
          example: "example-my-blog-1"
      responses:
        '200':
          description: 게시물 조회 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      result:
                        $ref: '#/components/schemas/PostDetailPublic'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/posts/admin:
    get:
      tags: [Admin]
      summary: 관리자용 게시물 목록 조회
      description: 비공개글 포함 게시물 목록을 조회합니다. JWT 인증이 필요합니다.
      operationId: getPostsAdmin
      security:
        - cookieAuth: []
      parameters:
        - name: page
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 10000
            default: 1
        - name: pageSize
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 200
            default: 8
        - name: search
          in: query
          schema:
            type: string
            maxLength: 100
        - name: categorySlug
          in: query
          schema:
            type: string
            maxLength: 100
        - name: tagSlugs
          in: query
          schema:
            type: array
            items:
              type: string
            maxItems: 50
          style: form
          explode: false
        - name: tagFilterMode
          in: query
          schema:
            type: string
            enum: [OR, AND]
            default: OR
        - name: sortBy
          in: query
          schema:
            type: string
            enum: [createdAt, updatedAt, title, excerpt]
            default: createdAt
        - name: sortDir
          in: query
          schema:
            type: string
            enum: [asc, desc]
            default: desc
        - name: isPublish
          in: query
          schema:
            type: boolean
            default: true
        - name: isPrivate
          in: query
          schema:
            type: boolean
            default: false
      responses:
        '200':
          description: 관리자 게시물 목록 조회 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      result:
                        type: object
                        properties:
                          meta:
                            type: object
                            properties:
                              pagination:
                                $ref: '#/components/schemas/Pagination'
                              sort:
                                $ref: '#/components/schemas/Sort'
                              filters:
                                type: object
                                properties:
                                  search:
                                    type: string
                                    nullable: true
                                  categorySlug:
                                    type: string
                                    nullable: true
                                  tagSlugs:
                                    type: array
                                    items:
                                      type: string
                                  isPublish:
                                    type: boolean
                                  isPrivate:
                                    type: boolean
                          data:
                            type: array
                            items:
                              $ref: '#/components/schemas/PostSummaryAdmin'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/posts/{id}:
    patch:
      tags: [Admin]
      summary: 게시물 수정
      description: 게시물을 수정합니다. JWT 인증이 필요합니다.
      operationId: updatePost
      security:
        - cookieAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          example: 12
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                slug:
                  type: string
                  maxLength: 150
                title:
                  type: string
                  maxLength: 100
                content:
                  type: string
                  maxLength: 100000
                thumbnail:
                  type: string
                  nullable: true
                  maxLength: 2048
                categoryId:
                  type: integer
                  nullable: true
                tagIds:
                  type: array
                  items:
                    type: integer
                  maxItems: 50
                isPublish:
                  type: boolean
                isPrivate:
                  type: boolean
      responses:
        '200':
          description: 게시물 수정 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      result:
                        type: object
                        properties:
                          data:
                            $ref: '#/components/schemas/PostDetailAdmin'
                          diff:
                            $ref: '#/components/schemas/Diff'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    delete:
      tags: [Admin]
      summary: 게시물 삭제
      description: 게시물을 삭제합니다. JWT 인증이 필요합니다.
      operationId: deletePost
      security:
        - cookieAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          example: 12
      responses:
        '200':
          description: 게시물 삭제 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommonResponse'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  # ============================================================
  # 카테고리
  # ============================================================
  /api/v1/category:
    get:
      tags: [Public]
      summary: 카테고리 목록 조회
      description: 카테고리 목록을 조회합니다.
      operationId: getCategories
      parameters:
        - name: search
          in: query
          schema:
            type: string
            maxLength: 100
        - name: sortBy
          in: query
          schema:
            type: string
            enum: [id, name, slug, path]
            default: id
        - name: sortDir
          in: query
          schema:
            type: string
            enum: [asc, desc]
            default: asc
      responses:
        '200':
          description: 카테고리 목록 조회 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      result:
                        type: object
                        properties:
                          meta:
                            type: object
                            properties:
                              sort:
                                $ref: '#/components/schemas/Sort'
                              total:
                                type: integer
                                example: 4
                              filters:
                                type: object
                                properties:
                                  search:
                                    type: string
                                    nullable: true
                          data:
                            type: array
                            items:
                              type: object
                              required: [id, name, slug, breadcrumb, depth]
                              properties:
                                id:
                                  type: integer
                                name:
                                  type: string
                                slug:
                                  type: string
                                breadcrumb:
                                  type: string
                                depth:
                                  type: integer
                                  description: 루트=0
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    post:
      tags: [Admin]
      summary: 카테고리 생성
      description: 카테고리를 생성합니다. JWT 인증이 필요합니다.
      operationId: createCategory
      security:
        - cookieAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [name, slug]
              properties:
                parentId:
                  type: integer
                  nullable: true
                  default: 1
                name:
                  type: string
                  maxLength: 100
                slug:
                  type: string
                  maxLength: 150
      responses:
        '201':
          description: 카테고리 생성 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      result:
                        $ref: '#/components/schemas/CategoryDetail'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/category/{id}:
    patch:
      tags: [Admin]
      summary: 카테고리 수정
      description: 카테고리를 수정합니다. JWT 인증이 필요합니다.
      operationId: updateCategory
      security:
        - cookieAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                parentId:
                  type: integer
                  nullable: true
                name:
                  type: string
                  maxLength: 100
                slug:
                  type: string
                  maxLength: 150
      responses:
        '200':
          description: 카테고리 수정 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      result:
                        type: object
                        properties:
                          data:
                            $ref: '#/components/schemas/CategoryDetail'
                          diff:
                            $ref: '#/components/schemas/Diff'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    delete:
      tags: [Admin]
      summary: 카테고리 삭제
      description: 카테고리를 삭제합니다. JWT 인증이 필요합니다.
      operationId: deleteCategory
      security:
        - cookieAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 카테고리 삭제 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommonResponse'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  # ============================================================
  # 태그
  # ============================================================
  /api/v1/tag:
    get:
      tags: [Public]
      summary: 태그 목록 조회
      description: 태그 목록을 조회합니다.
      operationId: getTags
      parameters:
        - name: search
          in: query
          schema:
            type: string
            maxLength: 100
        - name: sortBy
          in: query
          schema:
            type: string
            enum: [id, name, slug]
            default: id
        - name: sortDir
          in: query
          schema:
            type: string
            enum: [asc, desc]
            default: asc
      responses:
        '200':
          description: 태그 목록 조회 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      result:
                        type: object
                        properties:
                          meta:
                            type: object
                            properties:
                              sort:
                                $ref: '#/components/schemas/Sort'
                              total:
                                type: integer
                              filters:
                                type: object
                                properties:
                                  search:
                                    type: string
                                    nullable: true
                          data:
                            type: array
                            items:
                              $ref: '#/components/schemas/TagPublic'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    post:
      tags: [Admin]
      summary: 태그 생성
      description: 태그를 생성합니다. JWT 인증이 필요합니다.
      operationId: createTag
      security:
        - cookieAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [name, slug]
              properties:
                name:
                  type: string
                  maxLength: 100
                slug:
                  type: string
                  maxLength: 150
      responses:
        '201':
          description: 태그 생성 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      result:
                        $ref: '#/components/schemas/TagDetail'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/tag/{id}:
    patch:
      tags: [Admin]
      summary: 태그 수정
      description: 태그를 수정합니다. JWT 인증이 필요합니다.
      operationId: updateTag
      security:
        - cookieAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  maxLength: 100
                slug:
                  type: string
                  maxLength: 150
      responses:
        '200':
          description: 태그 수정 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      result:
                        type: object
                        properties:
                          data:
                            $ref: '#/components/schemas/TagDetail'
                          diff:
                            $ref: '#/components/schemas/Diff'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    delete:
      tags: [Admin]
      summary: 태그 삭제
      description: 태그를 삭제합니다. JWT 인증이 필요합니다.
      operationId: deleteTag
      security:
        - cookieAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 태그 삭제 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommonResponse'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  # ============================================================
  # 정적 파일
  # ============================================================
  /api/v1/static/{file}:
    get:
      tags: [Public]
      summary: 정적 파일 조회
      description: 정적 파일(이미지 등)을 반환합니다.
      operationId: getStaticFile
      parameters:
        - name: file
          in: path
          required: true
          schema:
            type: string
          example: "test.png"
      responses:
        '200':
          description: 파일 반환 성공
          headers:
            Content-Type:
              schema:
                type: string
                example: "image/png"
            Cache-Control:
              schema:
                type: string
                example: "public, max-age=31536000"
          content:
            image/*:
              schema:
                type: string
                format: binary
        '403':
          description: 허용되지 않은 파일 타입
        '404':
          description: 파일 없음

  # ============================================================
  # 인증 (Auth)
  # ============================================================
  /api/v1/auth/login:
    post:
      tags: [Admin]
      summary: 관리자 로그인
      description: 관리자 로그인 후 JWT 쿠키를 발급합니다.
      operationId: login
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [id, password]
              properties:
                id:
                  type: string
                password:
                  type: string
                  format: password
      responses:
        '200':
          description: 로그인 성공
          headers:
            Set-Cookie:
              schema:
                type: string
                example: "access_token=eyJ...; HttpOnly; Secure; SameSite=Strict; Path=/; Max-Age=3600"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommonResponse'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/auth/register:
    post:
      tags: [Admin]
      summary: 관리자 계정 생성
      description: |
        관리자 계정을 생성합니다.  
        DB에 계정이 없는 경우(Bootstrap) JWT 없이 1개 생성 가능.  
        이후 추가 생성 시 JWT 인증이 필요합니다.
      operationId: register
      security:
        - {}
        - cookieAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [id, password]
              properties:
                id:
                  type: string
                  minLength: 3
                  maxLength: 31
                password:
                  type: string
                  format: password
                  minLength: 8
                  maxLength: 80
                nickname:
                  type: string
                  minLength: 2
                  maxLength: 20
                avatarUrl:
                  type: string
                  maxLength: 2048
      responses:
        '201':
          description: 계정 생성 성공
          headers:
            Set-Cookie:
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommonResponse'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict (아이디 중복)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/auth/update:
    patch:
      tags: [Admin]
      summary: 관리자 계정 수정
      description: 관리자 계정 정보를 수정합니다. JWT 인증이 필요합니다.
      operationId: updateAccount
      security:
        - cookieAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                password:
                  type: string
                  format: password
                  minLength: 8
                  maxLength: 80
                nickname:
                  type: string
                  minLength: 2
                  maxLength: 20
                avatarUrl:
                  type: string
                  maxLength: 2048
      responses:
        '200':
          description: 계정 수정 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      result:
                        type: object
                        properties:
                          data:
                            type: object
                            properties:
                              id:
                                type: string
                              passwordStatus:
                                type: string
                                enum: [CHANGED, NONE]
                              nickname:
                                type: string
                              avatarUrl:
                                type: string
                          diff:
                            $ref: '#/components/schemas/Diff'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict (닉네임 중복)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/auth/delete:
    delete:
      tags: [Admin]
      summary: 관리자 계정 삭제
      description: 관리자 계정을 삭제합니다. JWT 인증이 필요합니다.
      operationId: deleteAccount
      security:
        - cookieAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [id]
              properties:
                id:
                  type: string
                  maxLength: 31
                  description: 삭제할 관리자 계정 ID
      responses:
        '200':
          description: 계정 삭제 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommonResponse'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'